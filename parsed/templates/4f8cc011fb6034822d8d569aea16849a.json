{"layout/empty":"<!DOCTYPE html>\n<html>\n<head>\n    <title>{{ head.title }}</title>\n    {{{ head.meta_tags }}}\n    {{{ head.config }}}\n\n    <link href=\"{{ head.favicon }}\" rel=\"shortcut icon\">\n    {{#block \"head\"}}{{/block}}\n    \n    {{inject 'themeSettings' theme_settings}}\n</head>\n<body>\n    {{#block \"page\"}}{{/block}}\n\n    <script>\n        // Exported in app.js\n        window.stencilBootstrap(\"{{page_type}}\", {{jsContext}}).load();\n    </script>\n</body>\n</html>\n","pages/checkout":"<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js\">\n</script>\n{{#partial \"head\"}} {{{ checkout.checkout_head }}} {{{ stylesheet '/assets/css/optimized-checkout.css'\n}}} {{ getFontsCollection }}\n<script type=\"text/javascript\">\n  window.language = {\n    {\n      langJson 'optimized_checkout'\n    }\n  };\n</script>\n{{{head.scripts}}} {{/partial}} {{#partial \"page\"}}\n<header class=\"checkoutHeader optimizedCheckout-header\">\n  <div class=\"checkoutHeader-content\">\n    <h1 class=\"is-srOnly\">\n      {{lang 'checkout.title'}}\n    </h1>\n    <h2 class=\"checkoutHeader-heading\">\n      <a class=\"checkoutHeader-link\" href=\"{{urls.home}}\">\n        {{#if checkout.header_image}}\n        <img alt=\"{{settings.store_logo.title}}\" class=\"checkoutHeader-logo\" id=\"logoImage\"\n        src=\"{{ checkout.header_image }}\" />\n        {{ else }}\n        <span class=\"header-logo-text\">\n          {{settings.store_logo.title}}\n        </span>\n        {{/if}}\n      </a>\n    </h2>\n  </div>\n</header>\nTesting\n<script>\n  $(document).ready(function() {\n    const intervalId = setInterval(function() {\n      if ($(\".remove-checkout-step-numbers\").find('legend.form-legend:contains(\"Order Comments\") span[class=\"c1\"]').length > 0) {\n        clearInterval(intervalId);\n      } else {\n        $(\".remove-checkout-step-numbers\").find('legend.form-legend:contains(\"Order Comments\")').append('<span class=\"c1\" style=\"margin-left: 5px\">AFTER</span>');\n        $(\".remove-checkout-step-numbers .checkout-steps .checkout-step--shipping .checkout-view-content .checkout-form fieldset[data-test='checkout-shipping-comments']\").append(\"<br><label for='gift-text' class='custom-gift-text form-legend optimizedCheckout-headingSecondary'>Add Gift Text</label> <input autocomplete='off' maxlength='2000' type='text' class='form-input optimizedCheckout-form-input' name='gift-text' id='gift-text' placeholder='Enter Gift text' value=''>\");\n\n        $(document).on(\"keyup\", '.remove-checkout-step-numbers .checkout-steps .checkout-step--shipping .checkout-view-content .checkout-form fieldset[data-test=\"checkout-shipping-comments\"] #gift-text',\n        function() {\n          console.log(\"Working!\");\n        });\n        $(\".dynamic-form-field--field_28\").hide();\n      }\n    },\n    100);\n\n    $(document).on(\"click\", \".layout-main .checkout-steps .checkout-step--shipping .checkout-view-content .form-actions button\",\n    function() {\n      var giftText = $(\"#gift-text\").val();\n      if (giftText) {\n        console.log(\"Gift text:\", giftText);\n        updateCheck(giftText);\n      }\n    });\n    let cartId;\n    const options = {\n      method: \"GET\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n    };\n\n    fetch(\"https://harshit-tripathi.mybigcommerce.com/api/storefront/carts\", options).then((response) = >response.json()).then((response) => {\n      console.log(response);\n      cartId = response[0].id;\n      console.log(\"CartId:\", cartId);\n      demo(cartId);\n      updateCheck(cartId);\n    }).\n    catch((err) = >console.error(err));\n\n    function updateCheck(gift_message) {\n      jQuery.ajax({\n        url: \"/api/storefront/checkouts/\" + cartId,\n        method: \"GET\",\n        success: function(res) {\n          updatedata(res, gift_message);\n        },\n      });\n    }\n    function demo() {\n      console.log(\"!!\", cartId);\n    }\n\n    function updatedata(res, gift_message) {\n      // Set the value of field_28Input with the entered gift message\n      for (let i = 0; i < res.consignments[0].address.customFields.length; i++) {\n        if (res.consignments[0].address.customFields[i].fieldId == \"field_28\") {\n          res.consignments[0].address.customFields[i].fieldValue = gift_message;\n        }\n      }\n      var responseData = {\n        address: res.consignments[0].address,\n        lineItems: [],\n        cart: res.cart.lineItems.physicalItems[0],\n      };\n      console.log(\"length of custom field \" + res.consignments[0].address.customFields.length);\n      for (let i = 0; i < res.cart.lineItems.physicalItems.length; i++) {\n        var myobj = {\n          itemId: res.cart.lineItems.physicalItems[i].id,\n          quantity: res.cart.lineItems.physicalItems[i].quantity,\n        };\n        responseData.lineItems.push(myobj);\n        console.log(\"myobj:\", myobj);\n      }\n      $.ajax({\n        url: \"/api/storefront/checkouts/\" + cartId + \"/consignments/\" + res.consignments[0].id,\n        method: \"PUT\",\n        contentType: \"application/json\",\n        data: JSON.stringify(responseData),\n      });\n    }\n  });\n</script>\n{{{ checkout.checkout_content }}} {{{ footer.scripts }}} {{/partial}}\n{{> layout/empty}}\n"}
